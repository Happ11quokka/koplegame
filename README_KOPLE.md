# Matching Game — 국제 교류 매칭 PWA

KOPLE 국제학생 네트워킹 행사에 맞춰 기획·개발한 웹 기반 매칭 게임입니다. 참가자는 여섯 개의 질문에 답하며 서로의 정체를 추리하고, 현장에서 자연스럽게 대화를 시작할 수 있도록 돕습니다.

## 👤 역할

- 제품 기획, UX 라이팅, UI 디자인, 프런트엔드·파이어베이스 구성까지 단독 수행

## ⚙️ 기술 스택

- **프런트엔드**: Next.js App Router, TypeScript, React Hooks, Tailwind CSS
- **백엔드**: Firebase Firestore, Firebase Authentication(익명 로그인), Firebase Hosting
- **배포/운영**: Vercel, `.env.local` 기반 환경 변수, Next.js PWA(서비스 워커, manifest)
- **기타**: React Context + `useState` 조합으로 상태 관리, `localStorage` 캐시로 재접속 최적화

```text
src/
├── app/
│   ├── page.tsx            # 당진 스토리텔링 + 힌트 입력 흐름
│   └── event/[code]/       # 이벤트 코드별 매칭 게임 화면
├── components/             # 재사용 UI 컴포넌트
├── lib/firebase/           # Firestore 초기화 및 헬퍼
└── types/                  # 이벤트/힌트 타입 선언
```

## 🗄️ 데이터베이스 구조 & 매칭 로직

### 컬렉션 구조

```text
events (컬렉션)
└── {eventId} (문서)
    ├── code: string (예: "DANGJIN")
    ├── title: string
    ├── createdAt: Timestamp
    └── hints (하위 컬렉션)
        └── {hintId} (문서)
            ├── nickname: string
            ├── h1 ~ h6: string
            ├── matchedBy: string[]   # 맞춘 참가자 닉네임 목록
            ├── createdAt: Timestamp
```

### 매칭 흐름

1. **이벤트 진입**: 사용자가 입력한 코드(`Dangjin`)는 대문자로 정규화(`DANGJIN`)한 뒤 Firestore에서 `events` 컬렉션의 `code` 필드와 일치하는 문서를 조회합니다.
2. **참가자 등록**: 닉네임 중복 여부를 같은 이벤트 하위 컬렉션에서 검사하고, 통과하면 여섯 개의 힌트(`h1`~`h6`)와 함께 문서를 생성합니다.
3. **힌트 열람**: 자신의 힌트를 제외한 리스트를 조회하여 요약 카드(힌트 3개, 이모지 포함)로 노출합니다.
4. **정답 검증**: 특정 참가자를 선택해 닉네임을 입력하면, 소문자 비교로 일치 여부를 판별하고 맞으면 해당 힌트 문서의 `matchedBy` 배열에 닉네임을 추가합니다.
5. **실시간 갱신**: Firestore의 즉시성을 활용해 정답 후 다시 로딩하면 매칭 완료 뱃지와 본인 매칭 숫자가 업데이트됩니다.

### 설계 포인트

- 참가자 데이터는 이벤트 하위에 분리하여 이벤트별로 손쉽게 삭제 가능.
- `matchedBy`를 배열로 두어 나중에 리더보드, 통계 계산이 용이.
- 입력 단계에서 PII(전화번호·이메일 등)를 막기 위한 유효성 검사 훅 제공.

## 💡 주요 기능

- 당진 항구 스토리텔링 기반 온보딩으로 몰입감 강화
- 모바일 입력에 최적화된 6문항 힌트 폼과 인풋 유효성 검사
- 힌트 상세 화면에서 질문-응답을 한눈에 확인하고 즉시 추리
- 로컬 캐시에 닉네임 저장 → 새로고침 후에도 바로 재접속

## 📊 결과

- 행사 당일 전원 설치 없이 QR 접속 → 5분 내 힌트 제출률 90% 달성
- 운영진 피드백: 코드 하나만 교체해도 신규 이벤트 개설 가능, 추가 개발 없이 반복 행사 진행
- 참가자 간 대면 대화 유도 성공으로 이후 행사에서도 재사용 계획

## 🧠 배운 점

1. 지역 맥락에 맞춘 스토리텔링이 초기 이탈률을 줄인다.
2. 백엔드 지원이 없는 상황에서는 Firestore + Vercel 조합이 가장 빠른 이벤트 MVP.
3. 데이터 입력 단계에서 제약을 명확히 안내하면 개인정보 노출 우려를 낮출 수 있다.

## 🔭 다음 단계

1. 관리자용 라운드 컨트롤(힌트 공개 단계화) 화면 제작
2. 힌트 공개/매칭 결과를 푸시 알림으로 알리는 기능
3. 다국어 번역 토글 및 접근성(스크린리더) 개선

---

프로젝트 구조나 구현 세부사항이 궁금하다면 `QUICK_START.md`를 참고하고, 언제든 연락 주세요. 설계와 운영 전략을 더 자세히 공유할 수 있습니다.
